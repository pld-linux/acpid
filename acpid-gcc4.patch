--- acpid-1.0.4/ud_socket.c.warning	2003-11-17 16:24:58.000000000 -0500
+++ acpid-1.0.4/ud_socket.c	2005-03-16 17:51:40.000000000 -0500
@@ -58,7 +58,7 @@
 	while (1) {
 		int newsock = 0;
 		struct sockaddr_un cliaddr;
-		int len = sizeof(struct sockaddr_un);
+		socklen_t len = sizeof(struct sockaddr_un);
 
 		newsock = accept(listenfd, (struct sockaddr *)&cliaddr, &len);
 		if (newsock < 0) {
--- acpid-1.0.4/acpid.c.warning	2004-10-17 18:33:51.000000000 -0400
+++ acpid-1.0.4/acpid.c	2005-03-16 17:52:23.000000000 -0500
@@ -61,7 +61,7 @@
 main(int argc, char **argv)
 {
 	int event_fd;
-	int sock_fd;
+	int sock_fd = -1;
 
 	/* learn who we really are */
 	progname = (const char *)strrchr(argv[0], '/');
@@ -386,9 +386,7 @@
 	umask(0);
 
 	/* get outta the way */
-	chdir("/");
-
-	return 0;
+	return chdir("/");
 }
 
 static int
